!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("core-js/modules/es6.object.freeze.js"),require("core-js/modules/es6.function.name.js"),require("core-js/modules/es6.string.includes.js"),require("core-js/modules/es7.array.includes.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.object.freeze.js","core-js/modules/es6.function.name.js","core-js/modules/es6.string.includes.js","core-js/modules/es7.array.includes.js"],n):(e=e||self).MapboxLayerSwitcher=n()}(this,function(){"use strict";function e(e,n){var t,a=(n=void 0===n?{}:n).insertAt;e&&"undefined"!=typeof document&&(t=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).type="text/css","top"===a&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)))}e(".textnoselect {\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n}\r\n\r\n.ml-layerSwitcherBtn {\r\n    width: 29px;\r\n    height: 29px;\r\n    display: block;\r\n    padding: 0;\r\n    outline: none;\r\n    border: 0;\r\n    box-sizing: border-box;\r\n    background-color: white;\r\n    cursor: pointer;\r\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTQuODQ5cHgiIGhlaWdodD0iNTQuODQ5cHgiIHZpZXdCb3g9IjAgMCA1NC44NDkgNTQuODQ5IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1NC44NDkgNTQuODQ5OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGc+PGc+PGc+PHBhdGggZD0iTTU0LjQ5NywzOS42MTRsLTEwLjM2My00LjQ5bC0xNC45MTcsNS45NjhjLTAuNTM3LDAuMjE0LTEuMTY1LDAuMzE5LTEuNzkzLDAuMzE5Yy0wLjYyNywwLTEuMjU0LTAuMTA0LTEuNzktMC4zMThsLTE0LjkyMS01Ljk2OEwwLjM1MSwzOS42MTRjLTAuNDcyLDAuMjAzLTAuNDY3LDAuNTI0LDAuMDEsMC43MTZMMjYuNTYsNTAuODFjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMEw1NC40ODgsNDAuMzNDNTQuOTY0LDQwLjEzOSw1NC45NjksMzkuODE3LDU0LjQ5NywzOS42MTR6Ii8+PHBhdGggZD0iTTU0LjQ5NywyNy41MTJsLTEwLjM2NC00LjQ5MWwtMTQuOTE2LDUuOTY2Yy0wLjUzNiwwLjIxNS0xLjE2NSwwLjMyMS0xLjc5MiwwLjMyMWMtMC42MjgsMC0xLjI1Ni0wLjEwNi0xLjc5My0wLjMyMWwtMTQuOTE4LTUuOTY2TDAuMzUxLDI3LjUxMmMtMC40NzIsMC4yMDMtMC40NjcsMC41MjMsMC4wMSwwLjcxNkwyNi41NiwzOC43MDZjMC40NzcsMC4xOSwxLjI1MSwwLjE5LDEuNzI5LDBsMjYuMTk5LTEwLjQ3OUM1NC45NjQsMjguMDM2LDU0Ljk2OSwyNy43MTYsNTQuNDk3LDI3LjUxMnoiLz48cGF0aCBkPSJNMC4zNjEsMTYuMTI1bDEzLjY2Miw1LjQ2NWwxMi41MzcsNS4wMTVjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMGwxMi41NDEtNS4wMTZsMTMuNjU4LTUuNDYzYzAuNDc3LTAuMTkxLDAuNDgtMC41MTEsMC4wMS0wLjcxNkwyOC4yNzcsNC4wNDhjLTAuNDcxLTAuMjA0LTEuMjM2LTAuMjA0LTEuNzA4LDBMMC4zNTEsMTUuNDFDLTAuMTIxLDE1LjYxNC0wLjExNiwxNS45MzUsMC4zNjEsMTYuMTI1eiIvPjwvZz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==);\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    background-size: 70%;\r\n    border-radius: 4px;\r\n}\r\n");e("/*\r\n thematic layers\r\n*/\r\n\r\n.ml-panel-1 {\r\n    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\r\n    font-weight: 600;\r\n    z-index: 1;\r\n    border-radius: 3px;\r\n    color: #fff;\r\n    min-width: 120px;\r\n}\r\n\r\n.ml-panel-1 input[type=checkbox]:first-child+label {\r\n    border-radius: 3px 3px 0 0;\r\n}\r\n\r\n.ml-panel-1 label:last-child {\r\n    border-radius: 0 0 3px 3px;\r\n    border: none;\r\n}\r\n\r\n.ml-panel-1 input[type=checkbox] {\r\n    display: none;\r\n}\r\n\r\n.ml-panel-1 input[type=checkbox]+label {\r\n    background-color: #3386c0;\r\n    display: block;\r\n    cursor: pointer;\r\n    padding: 10px;\r\n    border-bottom: 1px solid rgba(0, 0, 0, 0.25);\r\n    text-align: center;\r\n}\r\n\r\n.ml-panel-1 input[type=checkbox]+label {\r\n    background-color: #3386c0;\r\n    text-transform: capitalize;\r\n}\r\n\r\n.ml-panel-1 input[type=checkbox]+label:hover, .listing-group input[type=checkbox]:checked+label {\r\n    background-color: #4ea0da;\r\n}\r\n\r\n.ml-panel-1 input[type=checkbox]:checked+label:before {\r\n    content: '✔';\r\n    margin-right: 5px;\r\n}\r\n\r\n/*\r\n    base layers\r\n*/\r\n\r\n.ml-panel-1 input[type=radio]:first-child+label {\r\n    border-radius: 3px 3px 0 0;\r\n}\r\n\r\n.ml-panel-1 label:last-child {\r\n    border-radius: 0 0 3px 3px;\r\n    border: none;\r\n}\r\n\r\n.ml-panel-1 input[type=radio] {\r\n    display: none;\r\n}\r\n\r\n.ml-panel-1 input[type=radio]+label {\r\n    background-color: #3386c0;\r\n    display: block;\r\n    cursor: pointer;\r\n    padding: 10px;\r\n    border-bottom: 1px solid rgba(0, 0, 0, 0.25);\r\n    text-align: center;\r\n}\r\n\r\n.ml-panel-1 input[type=radio]+label {\r\n    background-color: #3386c0;\r\n    text-transform: capitalize;\r\n}\r\n\r\n.ml-panel-1 input[type=radio]+label:hover, .listing-group input[type=radio]:checked+label {\r\n    background-color: #4ea0da;\r\n}\r\n\r\n.ml-panel-1 input[type=radio]:checked+label:before {\r\n    content: '✔';\r\n    margin-right: 5px;\r\n}\r\n");e(".ml-panel-2 {\r\n    background: #fff;\r\n    position: absolute;\r\n    z-index: 1;\r\n    top: 10px;\r\n    right: 10px;\r\n    border-radius: 3px;\r\n    min-width: 120px;\r\n    border: 1px solid rgba(0, 0, 0, 0.4);\r\n    font-family: 'Open Sans', sans-serif;\r\n}\r\n\r\n.ml-panel-2 a {\r\n    font-size: 13px;\r\n    color: #404040;\r\n    display: block;\r\n    margin: 0;\r\n    padding: 0;\r\n    padding: 10px;\r\n    text-decoration: none;\r\n    border-bottom: 1px solid rgba(0, 0, 0, 0.25);\r\n    text-align: center;\r\n}\r\n\r\n.ml-panel-2 a:last-child {\r\n    border: none;\r\n}\r\n\r\n.ml-panel-2 a:hover {\r\n    background-color: #f8f8f8;\r\n    color: #404040;\r\n}\r\n\r\n.ml-panel-2 a.active {\r\n    background-color: #3887be;\r\n    color: #ffffff;\r\n}\r\n\r\n.ml-panel-2 a.active:hover {\r\n    background: #3074a4;\r\n}");function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}function r(e,n){return null!=e?e:n}e(".ml-panel-tree1 {\r\n    margin: 0;\r\n    border: 4px solid #eee;\r\n    border-radius: 4px;\r\n    background-color: white;\r\n    max-height: inherit;\r\n    height: 100%;\r\n    box-sizing: border-box;\r\n    overflow-y: auto;\r\n    min-width: 240px;\r\n    font-size: 13px;\r\n}\r\n\r\n.ml-panel-tree1 ul {\r\n    list-style: none;\r\n    margin: 1.6em 0.4em;\r\n    padding-left: 0;\r\n}\r\n\r\n.ml-panel-tree1 li {\r\n    position: relative;\r\n    margin-top: 0.3em;\r\n    margin-top: 0px;\r\n    font-size: 1em;\r\n}\r\n\r\n.ml-basemap-group label {\r\n    padding-left: 1.2em;\r\n    font-size: 13px;\r\n}\r\n\r\n.ml-basemap-group ul {\r\n    padding-left: 1.2em;\r\n    margin: 0.1em 0 0 0;\r\n}\r\n\r\n.ml-basemap-group li {\r\n    position: relative;\r\n    margin-top: 0.3em;\r\n}\r\n\r\n.ml-basemap-group li input {\r\n    position: absolute;\r\n    left: 1.2em;\r\n    height: 1em;\r\n    width: 1em;\r\n    font-size: 1em;\r\n    margin: 0px;\r\n    margin-top: 0.35em;\r\n}\r\n\r\n.ml-basemap-group li label {\r\n    padding-left: 2.7em;\r\n    padding-right: 1.2em;\r\n    display: inline-block;\r\n    margin-top: 1px;\r\n    font-size: 13px;\r\n}\r\n\r\n.ml-overlay-group li {\r\n    position: relative;\r\n    margin-top: 0.3em;\r\n}\r\n\r\n.ml-overlay-group button {\r\n    position: absolute;\r\n    left: 0;\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    float: none;\r\n    font-size: 1em;\r\n    width: 1em;\r\n    height: 1em;\r\n    margin: 0;\r\n    background-position: center 2px;\r\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVR4nGNgGAWMyBwXFxcGBgaGeii3EU0tXHzPnj1wQRYsihqQ+I0ExDEMQAYNONgoAN0AmMkNaDSyQSheY8JiaCMOGzE04zIAmyFYNTMw4A+DRhzsUUBtAADw4BCeIZkGdwAAAABJRU5ErkJggg==');\r\n    transition: -webkit-transform 0.2s ease-in-out;\r\n    transition: transform 0.2s ease-in-out;\r\n    transition: transform 0.2s ease-in-out, -webkit-transform 0.2s ease-in-out;\r\n    background-color: white;\r\n    color: black;\r\n    border: none;\r\n}\r\n\r\n.ml-overlay-group input {\r\n    position: absolute;\r\n    left: 1.2em;\r\n    height: 1em;\r\n    width: 1em;\r\n    font-size: 1em;\r\n    margin: 0px;\r\n}\r\n\r\n.ml-overlay-group label {\r\n    padding-left: 2.7em;\r\n    padding-right: 1.2em;\r\n    display: inline-block;\r\n    margin-top: 1px;\r\n    font-size: 13px;\r\n}\r\n\r\n.ml-overlay-group ul {\r\n    padding-left: 1.2em;\r\n    margin: 0.1em 0 0 0;\r\n}\r\n\r\n.ml-overlay-group-label, .ml-basemap-group-label {\r\n    font-weight: bold;\r\n}\r\n\r\n.ml-overlay-layer, .ml-basemap-layer {\r\n    font-weight: unset;\r\n}\r\n\r\n.ml-menu-button-close {\r\n    transform: rotate(-90deg);\r\n    -webkit-transform: rotate(-90deg);\r\n}\r\n\r\n.ml-menu-close>ul {\r\n    height: 0px;\r\n    overflow: hidden;\r\n}"),r.EMPTY_OBJECT=Object.freeze({});var l=function(){function r(e,n,t,a){i(this,r),this._map=e,this._container=n,this._layers=t,this._activemode=a,this.init()}return t(r,[{key:"init",value:function(){this._layers&&(this._container.className="mapboxgl-ctrl",this._panel=document.createElement("nav"),this._panel.id="ml-panel-1",this._panel.className="ml-panel-1",this._panelContentStr="","none"!==this._activemode&&this.createLayerSwitcherBtn(),this.layersClassify(),this.createOverlaysPanel(),this.createBasemapsPanel(),this._panel.innerHTML=this._panelContentStr,this._container.appendChild(this._panel),this.addPanelEvent())}},{key:"layersClassify",value:function(){this._overlays=[],this._basemaps=[];for(var e=this._layers,n=0;n<e.length;n++){var t=e[n];("base"===t.type?this._basemaps:this._overlays).push(t)}}},{key:"createLayerSwitcherBtn",value:function(){switch(this._layerSwitcherBtn=document.createElement("button"),this._layerSwitcherBtn.className="ml-layerSwitcherBtn",this._activemode){case"click":this.layerSwitcherBtnClicKMode();break;case"mouseover":this.layerSwitcherBtnMouseOverMode()}}},{key:"layerSwitcherBtnClicKMode",value:function(){var e=this;this._layerSwitcherBtn.addEventListener("click",function(){"none"===e._panel.style.display&&(e._panel.setAttribute("style","display:block"),e._layerSwitcherBtn.setAttribute("style","display:none"))}),this._map.on("click",function(){"none"!==e._panel.style.display&&(e._panel.setAttribute("style","display:none"),e._layerSwitcherBtn.setAttribute("style","display:block"))}),this._panel.setAttribute("style","display:none"),this._container.appendChild(this._layerSwitcherBtn)}},{key:"layerSwitcherBtnMouseOverMode",value:function(){var e=this;this._layerSwitcherBtn.addEventListener("mouseenter",function(){"none"===e._panel.style.display&&(e._panel.setAttribute("style","display:block"),e._layerSwitcherBtn.setAttribute("style","display:none"))}),this._panel.addEventListener("mouseleave",function(){"none"!==e._panel.style.display&&(e._panel.setAttribute("style","display:none"),e._layerSwitcherBtn.setAttribute("style","display:block"))}),this._panel.setAttribute("style","display:none"),this._container.appendChild(this._layerSwitcherBtn)}},{key:"createBasemapsPanel",value:function(){for(var e=this._basemaps,n=0;n<e.length;n++){var t=e[n],a=t.id,r=t.name,t=t.type;this._panelContentStr+="<input type='radio' id='".concat(a,"' layertype='").concat(t,"' name='").concat(t,"' checked='checked' />\n                <label for='").concat(a,"' class='textnoselect'>").concat(r||a,"</label>")}}},{key:"createOverlaysPanel",value:function(){this._checked={};for(var e=this._overlays,n=0;n<e.length;n++){var t=e[n],a=t.id,r=t.name,t=t.type;this._panelContentStr+="<input type='checkbox' id='".concat(a,"' layertype='").concat(t||"","' checked='checked' />\n                <label for='").concat(a,"' class='textnoselect'>").concat(r||a,"</label>"),this._checked[a]=!0}}},{key:"addPanelEvent",value:function(){var n=this;this._map.once("load",function(){document.getElementById("ml-panel-1").addEventListener("change",function(e){"base"===e.target.attributes.layertype.nodeValue?n.changeBaseMap(e):n.changeOverlaysVisible(e),n._map._update()})})}},{key:"changeBaseMap",value:function(e){var t=this,e=e.target.id;this._map.setStyle(e),this._map.on("style.load",function(){for(var e in t._checked){var n=t._checked[e]?"visible":"none";t._map.setLayoutProperty(e,"visibility",n)}})}},{key:"changeOverlaysVisible",value:function(e){var n=e.target.id;e.target.checked?(this._map.setLayoutProperty(n,"visibility","visible"),this._checked[n]=!0):(this._map.setLayoutProperty(n,"visibility","none"),this._checked[n]=!1)}}]),r}(),s=function(){function r(e,n,t,a){i(this,r),this._map=e,this._container=n,this._layers=t,this._activemode=a,this.init()}return t(r,[{key:"init",value:function(){this._layers&&(this._container.className="mapboxgl-ctrl",this._panel=document.createElement("nav"),this._panel.id="ml-panel-2",this._panel.className="ml-panel-2",this._panelContentStr="","none"!==this._activemode&&this.createLayerSwitcherBtn(),this.layersClassify(),this.createOverlaysPanel(),this.createBasemapsPanel(),this._panel.innerHTML=this._panelContentStr,this._container.appendChild(this._panel),this.addPanelEvent())}},{key:"layersClassify",value:function(){this._overlays=[],this._basemaps=[];for(var e=this._layers,n=0;n<e.length;n++){var t=e[n];("base"===t.type?this._basemaps:this._overlays).push(t)}}},{key:"createLayerSwitcherBtn",value:function(){switch(this._layerSwitcherBtn=document.createElement("button"),this._layerSwitcherBtn.className="ml-layerSwitcherBtn",this._activemode){case"click":this.layerSwitcherBtnClicKMode();break;case"mouseover":this.layerSwitcherBtnMouseOverMode()}}},{key:"layerSwitcherBtnClicKMode",value:function(){var e=this;this._layerSwitcherBtn.addEventListener("click",function(){"none"===e._panel.style.display&&(e._panel.setAttribute("style","display:block"),e._layerSwitcherBtn.setAttribute("style","display:none"))}),this._map.on("click",function(){"none"!==e._panel.style.display&&(e._panel.setAttribute("style","display:none"),e._layerSwitcherBtn.setAttribute("style","display:block"))}),this._panel.setAttribute("style","display:none"),this._container.appendChild(this._layerSwitcherBtn)}},{key:"layerSwitcherBtnMouseOverMode",value:function(){var e=this;this._layerSwitcherBtn.addEventListener("mouseenter",function(){"none"===e._panel.style.display&&(e._panel.setAttribute("style","display:block"),e._layerSwitcherBtn.setAttribute("style","display:none"))}),this._panel.addEventListener("mouseleave",function(){"none"!==e._panel.style.display&&(e._panel.setAttribute("style","display:none"),e._layerSwitcherBtn.setAttribute("style","display:block"))}),this._panel.setAttribute("style","display:none"),this._container.appendChild(this._layerSwitcherBtn)}},{key:"createBasemapsPanel",value:function(){for(var e=this._basemaps,n=0;n<e.length;n++){var t=e[n],a=t.id,r=t.name,t=t.type;this._panelContentStr+="<a id='".concat(a,"' name='base' href='#' class='").concat(0===n?"active":"","' layertype='").concat(t||"","'>").concat(r||a,"</a>")}}},{key:"createOverlaysPanel",value:function(){this._checked={};for(var e=this._overlays,n=0;n<e.length;n++){var t=e[n],a=t.id,r=t.name,t=t.type;this._panelContentStr+="<a id='".concat(a,"' href='#' class='active' layertype='").concat(t||"","'>").concat(r||a,"</a>"),this._checked[a]=!0}}},{key:"addPanelEvent",value:function(){var n=this;this._map.once("load",function(){document.getElementById("ml-panel-2").addEventListener("click",function(e){"base"===e.target.attributes.layertype.nodeValue?n.changeBaseMap(e):n.changeOverlaysVisible(e),n._map._update()})})}},{key:"changeBaseMap",value:function(e){var t=this,n=e.target.id;this._map.setStyle(n,{diff:!1});for(var a=e.target.parentNode.children,r=0;r<a.length;r++)"base"===a[r].name&&(a[r].id!==n?a[r].className="":a[r].className="active");this._map.once("style.load",function(){for(var e in t._checked){var n=t._checked[e]?"visible":"none";t._map.setLayoutProperty(e,"visibility",n)}})}},{key:"changeOverlaysVisible",value:function(e){var n=e.target.id,e=document.getElementById(n);this._checked[n]?(this._map.setLayoutProperty(n,"visibility","none"),e.className="",this._checked[n]=!1):(this._map.setLayoutProperty(n,"visibility","visible"),e.className="active",this._checked[n]=!0)}}]),r}(),o=function(){function r(e,n,t,a){i(this,r),this._map=e,this._container=n,this._layers=t,this._activemode=a,this.init()}return t(r,[{key:"init",value:function(){this._layers&&(this._container.className="mapboxgl-ctrl",this._panel=document.createElement("div"),this._panel.id="ml-panel-tree1",this._panel.className="ml-panel-tree1",this._panelContent=document.createElement("ul"),this._panelContent.name="ml-parentul","none"!==this._activemode&&this.createLayerSwitcherBtn(),this.layersClassify(),this.createOverlaysPanel(),this.createBasemapsPanel(),this._panel.appendChild(this._panelContent),this._container.appendChild(this._panel),this.addBasemapEvent(),this.addOverlaysEvent())}},{key:"layersClassify",value:function(){this._overlays=[],this._basemaps=[];for(var e=this._layers,n=0;n<e.length;n++){var t=e[n];("base"===t.type?this._basemaps:this._overlays).push(t)}}},{key:"createLayerSwitcherBtn",value:function(){switch(this._layerSwitcherBtn=document.createElement("button"),this._layerSwitcherBtn.className="ml-layerSwitcherBtn",this._activemode){case"click":this.layerSwitcherBtnClicKMode();break;case"mouseover":this.layerSwitcherBtnMouseOverMode()}}},{key:"layerSwitcherBtnClicKMode",value:function(){var e=this;this._layerSwitcherBtn.addEventListener("click",function(){"none"===e._panel.style.display&&(e._panel.setAttribute("style","display:block"),e._layerSwitcherBtn.setAttribute("style","display:none"))}),this._map.on("click",function(){"none"!==e._panel.style.display&&(e._panel.setAttribute("style","display:none"),e._layerSwitcherBtn.setAttribute("style","display:block"))}),this._panel.setAttribute("style","display:none"),this._container.appendChild(this._layerSwitcherBtn)}},{key:"layerSwitcherBtnMouseOverMode",value:function(){var e=this;this._layerSwitcherBtn.addEventListener("mouseenter",function(){"none"===e._panel.style.display&&(e._panel.setAttribute("style","display:block"),e._layerSwitcherBtn.setAttribute("style","display:none"))}),this._panel.addEventListener("mouseleave",function(){"none"!==e._panel.style.display&&(e._panel.setAttribute("style","display:none"),e._layerSwitcherBtn.setAttribute("style","display:block"))}),this._panel.setAttribute("style","display:none"),this._container.appendChild(this._layerSwitcherBtn)}},{key:"createBasemapsPanel",value:function(){var e=this._basemaps,n=e.length;if(0<n){var t=document.createElement("li");t.className="ml-basemap-group",t.id="ml-basemap-group";var a=document.createElement("label");a.innerText="Base maps",a.className="ml-basemap-group-label",t.appendChild(a),this._panelContent.appendChild(t);for(var a=document.createElement("ul"),r="",i=0;i<n;i++){var l=e[i],s=l.id,o=l.name,l=l.type;r+="<li class='ml-basemap-layer'>\n                        <input type='radio' name='ml-".concat(l,"map-radio' id='").concat(s,"' checked='").concat(0===i?"checked":"","'/>\n                        <label for='").concat(l,"'>").concat(o||s,"</label>\n                    </li>")}a.innerHTML=r,t.appendChild(a),this._panelContent.appendChild(t)}}},{key:"createOverlaysPanel",value:function(){this._checked={};var n,e,t,a,r=this._overlays;0<r.length&&((n=document.createElement("li")).className="ml-overlay-group",n.id="ml-overlay-group",(e=document.createElement("button")).addEventListener("click",function(e){e.target.className.includes("ml-menu-button-close")?(e.target.className="",n.classList.remove("ml-menu-close")):(e.target.className="ml-menu-button-close",n.classList.add("ml-menu-close"))}),(t=document.createElement("input")).type="checkbox",t.id="ml-layergroup-checkbox",t.checked="checked",(a=document.createElement("label")).innerText="Overlays",a.className="ml-overlay-group-label",a.for="ml-layergroup-checkbox",n.appendChild(e),n.appendChild(t),n.appendChild(a),this._panelContent.appendChild(n),this.createSubTreeNode(r,n))}},{key:"createSubTreeNode",value:function(e,n){var r=this,t=e.length,i=document.createElement("ul");i.name="ml-parentul";for(var a=0;a<t;a++){var l,s,o=e[a],c=o.id,d=o.name,p=o.children;p?function(){var n=document.createElement("li");n.className="ml-overlay-group";var e=document.createElement("button");e.addEventListener("click",function(e){e.target.className.includes("ml-menu-button-close")?(e.target.className="",n.classList.remove("ml-menu-close")):(e.target.className="ml-menu-button-close",n.classList.add("ml-menu-close"))});var t=document.createElement("input");t.type="checkbox",t.name="ml-layergroup-checkbox",t.checked="checked";var a=document.createElement("label");a.className="ml-overlay-group-label",a.innerText=d||c,n.appendChild(e),n.appendChild(t),n.appendChild(a),i.appendChild(n),r.createSubTreeNode(p,n)}():((l=document.createElement("li")).className="ml-overlay-layer",l.id=c,(s=document.createElement("input")).type="checkbox",s.name="ml-overlay-checkbox",s.checked="checked",this._checked[c]=!0,(o=document.createElement("label")).innerText=d||c,l.appendChild(s),l.appendChild(o),i.appendChild(l))}n.appendChild(i)}},{key:"addBasemapEvent",value:function(){var n=this;this._map.once("load",function(){document.getElementById("ml-basemap-group").addEventListener("click",function(e){"ml-basemap-radio"===e.target.name&&n.changeBaseMap(e)})})}},{key:"addOverlaysEvent",value:function(){var l=this;this._map.once("load",function(){for(var n=document.getElementsByClassName("ml-overlay-layer"),e=0;e<n.length;e++)!function(e){var e=n[e],t=e.id;e.addEventListener("click",function(e){var n;"checkbox"===e.target.type&&(n=e.target.checked,l._map.setLayoutProperty(t,"visibility",n?"visible":"none"),l._checked[t]=n,e=e.target.parentNode.parentNode,l.layerCheckboxChanged(e))})}(e);for(var t=document.getElementsByClassName("ml-overlay-group"),a=0;a<t.length;a++)!function(e){var r=t[e].querySelectorAll("input"),i=r[0];i.addEventListener("change",function(e){for(var n=1;n<r.length;n++){var t=r[n],a=i.checked;t.checked=a,"ml-overlay-checkbox"===t.name&&(t=t.parentNode.id,l._map.setLayoutProperty(t,"visibility",a?"visible":"none"),l._checked[t]=a,a=e.target.parentNode.parentNode,l.layergroupCheckboxChanged(a))}})}(a)})}},{key:"changeBaseMap",value:function(e){var t=this,e=e.target.id;this._map.setStyle(e,{diff:!1}),this._map.once("style.load",function(){for(var e in t._checked){var n=t._checked[e]?"visible":"none";t._map.setLayoutProperty(e,"visibility",n)}})}},{key:"layergroupCheckboxChanged",value:function(e){if("ml-parentul"===e.name){for(var n=e.querySelectorAll("input"),t=0,a=0;a<n.length;a++)n[a].checked&&t++;0===t?e.parentNode.children[1].checked=!1:t===n.length&&(e.parentNode.children[1].checked=!0),this.layergroupCheckboxChanged(e.parentNode.parentNode)}}},{key:"layerCheckboxChanged",value:function(e){if("ml-parentul"===e.name){for(var n=e.querySelectorAll("input"),t=0,a=0;a<n.length;a++)n[a].checked&&t++;0===t?e.parentNode.children[1].checked=!1:t===n.length&&(e.parentNode.children[1].checked=!0),this.layerCheckboxChanged(e.parentNode.parentNode)}}}]),r}();return function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,n),this._template=r(e.template,"simple1"),this._layers=r(e.layers,[]),this._activemode=r(e.activemode,"none")}return t(n,[{key:"onAdd",value:function(e){switch(this._map=e,this._container=document.createElement("div"),this._template){case"simple1":new l(this._map,this._container,this._layers,this._activemode);break;case"simple2":new s(this._map,this._container,this._layers,this._activemode);break;case"tree1":new o(this._map,this._container,this._layers,this._activemode);break;default:console.error("the template parameters are illegal!")}return this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}}]),n}()});
//# sourceMappingURL=mapbox-layerswitcher.min.js.map
